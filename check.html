<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Accessible Menu Component</title>
    <style>
      body {
  margin: 0;
  padding: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
}

button {
  background-color: transparent;
  border: none;
  cursor: pointer;
}

button:focus {
  outline: none;
  border: 0.125rem solid #005bd3;
}

.navbar-Collections-Button-Desktop {
  padding: 0.75rem;
  border: 0.063rem solid #b5b5b5;
  border-radius: 0.375rem;
}

.navbar-Collections-Button-Desktop:hover {
  background-color: #f6f3f6;
}

.menu-wrapper {
  position: relative;
}

.menu {
  list-style-type: none;
  margin: 0;
  padding: 0;
  position: absolute;

  display: none;

  top: 3.5rem;
  border: 0.063rem solid #b5b5b5;
  border-radius: 0.375rem;
  right: 0rem;
  min-width: 16rem;
}

.menu-active {
  display: block;
}

.menu-item {
  color: #303030;
  border-radius: 0.375rem;

  cursor: pointer;
}

.menu-item button {
  padding: 0.75rem;
  width: 100%;
  height: 100%;
  text-align: left;
  border-radius: 0.375rem;
}

.menu-item button {
  cursor: pointer;
}

.menu-item:hover {
  background-color: #f6f3f6;
}
    </style>
  </head>
  <body>
    <button
      id="navbar-Collections-Button-Desktop"
      class="navbar-Collections-Button-Desktop"
      aria-haspopup="true"
      aria-expanded="false"
      aria-controls="navbar-Collections-Button-Desktop-content"
    >
      Dami's profile
    </button>
    <div class="menu-wrapper">

      <ul
        class="menu"
        role="menu"
        id="navbar-Collections-Button-Desktop-content"
        aria-labelledby="navbar-Collections-Button-Desktop"
      >
        <li class="menu-item">
          <button role="menuitem">Switch account</button>
        </li>

        <li class="menu-item">
          <button role="menuitem">
            Change profile picture
          </button>
        </li>

        <li class="menu-item">
          <button role="menuitem">Logout</button>
        </li>
      </ul>
    </div>
  </body>
  <div class="dc-Menu-DropdownContainer">
    <div class="dc-Menu-Dc-Text2-Collections">
      <div class="dc-Menu-DropdownContainer-Dc-Text">DC</div>
      <div class="dc-Menu-DropdownContainer-Dc-Collections">Collections</div>
      <img src="" alt="" class="dc-Menu-DropdownContainer-Dc-Collections-Mark-Img">
  </div>
  <div class="dc-Menu-DropdownContainer-AllStores-Img-Container">
  <img src="https://crushingit.tech/hackathon-assets/icon-store.svg" alt="" class="all-Stores-Image">
  <div class="all-Stores-Text">All Stores</div>
  </div>
  <li class="menu-Item">
    <a href="">Help Center</a>
  </li>
  <li class="menu-Item">
    <a href="">Change Log</a>
  </li>
  <li class="menu-Item">
    <a href="">Community forums</a>
  </li>
  <li class="menu-Item">
    <a href="">Hire A shopify Partner</a>
  </li>
  <li class="menu-Item">
    <a href="">Keyboard shortcuts</a>
  </li>
  <li class="menu-Item">
    <a href="">David Micheal</a><br>davidmicheal@gmail.com
  </li>
  <li class="menu-Item">
    <a href="">Manage Account</a>
  </li>
  <li class="menu-Item">
    <a href="">Log Out</a>
  </li>
  </div>
</div>
  <script>
    /**
 * when i click the menu trigger,
 * the menu appears
 */

function app() {
  const menuTrigger =
    document.querySelector("#navbar-Collections-Button-Desktop");
  const menu = document.querySelector(
    "#navbar-Collections-Button-Desktop-content"
  );

  const allMenuItems = menu.querySelectorAll(
    '[role="menuitem"]'
  );

  function closeMenu() {
    menuTrigger.ariaExpanded = "false";
    menuTrigger.focus();
  }

  function handleMenuEscapeKeypress(event) {
    // if user pressed escape key
    if (event.key === "Escape") {
      toggleMenu();
    }
  }

  function handleMenuItemArrowKeyPress(
    event,
    menuItemIndex
  ) {
    // create some helpful variables : isLastMenuItem, isFirstMenuItem
    const isLastMenuItem =
      menuItemIndex === allMenuItems.length - 1;
    const isFirstMenuItem = menuItemIndex === 0;

    const nextMenuItem = allMenuItems.item(
      menuItemIndex + 1
    );
    const previousMenuItem = allMenuItems.item(
      menuItemIndex - 1
    );

    // if the user pressed arrow right or arrow down
    if (
      event.key === "ArrowRight" ||
      event.key === "ArrowDown"
    ) {
      // if user is on last item, focus on first menuitem
      if (isLastMenuItem) {
        allMenuItems.item(0).focus();

        return;
      }
      // then focus on next menu item
      nextMenuItem.focus();
    }

    // if the user pressed arrow up or arrow left
    if (
      event.key === "ArrowUp" ||
      event.key === "ArrowLeft"
    ) {
      if (isFirstMenuItem) {
        allMenuItems.item(allMenuItems.length - 1).focus();
        return;
      }

      previousMenuItem.focus();
    }
    // then focus on the previous menu item
    // if the user is on first menu item, focus on last menuitem
  }

  function openMenu() {
    menuTrigger.ariaExpanded = "true";
    allMenuItems.item(0).focus();

    menu.addEventListener(
      "keyup",
      handleMenuEscapeKeypress
    );

    // for each menu item, register an event listener for the keyup event
    allMenuItems.forEach(function (
      menuItem,
      menuItemIndex
    ) {
      menuItem.addEventListener("keyup", function (event) {
        handleMenuItemArrowKeyPress(event, menuItemIndex);
      });
    });
  }

  function toggleMenu() {
    const isExpanded =
      menuTrigger.attributes["aria-expanded"].value ===
      "true";
    menu.classList.toggle("menu-active");

    if (isExpanded) {
      closeMenu();
    } else {
      openMenu();
    }
  }

  menuTrigger.addEventListener("click", toggleMenu);
}

app();

/**
 * When the menu is active and i press the arrow down or arrow right keys,
 * focus is moved to the next menu item.
 * if i am on the last menu item,
 * focus moves back to the first menu item
 */

/**
 * when the menu is active and i press the arrow up or arrow left keys,
 * focus is moved to the previous menu item.
 * if i am on the first menu item,
 * focus moves to the last menu item.
 */
  </script>
</html>